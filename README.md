### TODO


- Поменять интерес на видимость

- Настроить сервак с пгскуэлем
- Django (изучить миграции)
- Добавить админку
- Добавить возможность постинга из админки сообщения в бот
- Записывать в базу всё что отправляет пользователь боту. Записывать в базу само сообщение + всю перcональную информацию которую может отдать телеграм.

- Собеседник (поменять везде как общую категорию для друга и соседа)
- Для вас формируется спринт. Это может занять некоторое время
- Ограничение рейтинга по тегам с целью равномерного распределения соседей у популярных пользователей

# Coresh

**Сервис для поиска друзей на базе телеграм-бота. Помогает найти друзей и единомышленников задавая и отвечая на вопросы по интересным пользователю темам, а так же оценивая ответы других людей.**

Пользователь получает с паузой в сутки набор карточек, который называется спринтом для взаимодействия с сообществом. В едином интерфейсе постепенно заполняется профиль, задаются вопросы и ответы сообществу, так же оценивается активность других пользователей. После прохождения спринта пользователь может посмотреть историю активности лучшего по мнению алгоритма потенциального друга, а так же пользователей для которых он сам стал лучшей парой. При взаимной симпатии - система позволяет обменяться контактами.

Платформа ищет интересных людей с помощью рейтинга соседства. В алгоритме рекомендаций учитывается совместимость по типажу, который определяется на основе опросника, общим подпискам на теги и прочим весам для принятия решений. Сервис не учитывает пол, возраст и другие анкетные данные не связанные с качествами личности. Платформа имеет открытый исходный код, средства на содержание и разработку собираются с помощью пожертвований, данные пользователей никак не используются в коммерческих целях.

## Основные термины

**Пользователь** - человек зарегистрированный в системе. Может так же называться участником и юзером.

**Собеседник** - высшая категория для друга и соседа.

**Сосед** - Пользователи автоматически добавляются в список соседей в случае совпадения типажа или лайка их карточки. Соседи имеют рейтинг соседства. Пользователи с самым высоким рейтингом соседства после каждого спринта взаимно предлагаются друг-другу стать друзьями. Пользователь может заблокировать соседа, если ему не понравится одна из его карточек, в таком случае, он больше не будет появляться в его спринтах.

**Друг** - если пользователи взаимно добавили друг-друга в друзья - они появляются в соответствующем списке. Друзья могут смотреть карточки друг-друга, а так же им доступны ссылки на их личные аккаунты в Телеграме. Друга можно так же заблокировать.

**Языки** - пользователь должен выбрать свой основной язык, на котором будет отрисовываться интерфейс, а так же языки которыми он владеет. Система автоматически определяет язык карточек.

**Спринт** - набор формируемых с паузой раз в сутки персонально для каждого пользователя карточек. При завершении спринта пользователь получает профили одного или нескольких потенциальных друзей.

**Карточка** - базовая сущность, которая является частью спринта. Может быть опросником для формирования личной анкеты (язык, типаж, теги), формой для отправки вопроса сообществу, формой для ответа на вопрос других участников или просьбой оценить ответы на вопросы других пользователей. Во время спринта могут так же показываться информационные карточки, например, с просьбой пожертвовать денег на проект.

**Типаж** - Типажи созданы как один из коэффициентов для алгоритмов рекомендаций. Они не связаны с какими-то интересами или убеждениями пользователей, но помогают находить более комфортных по общему бэкграунду людей, что особенно полезно для новых пользователей. В базе данных ответы на вопросы в "типажах" представлены в виде булевых значений с семантически важным значением NULL. У вопросов могут быть следующие значения: true/NULL/false, true/false, true/NULL. Что бы попасть в соседи пользователя на основе типажа необходимо по всем вопросам попасть либо в полярное значение (true/false) либо в true или false и NULL (то есть, не важно). На основе типажей у новых пользователей формируются соседи, карточки которых будут показываться в приоритетном режиме. Текущий список вопросов для определения типажей см. [здесь](README-files/semantic-list.md).

**Теги** - интересы, жизненные взгляды, темы для обсуждения и прочее. Пользователь должен указать своё отношение к каждому тегу в процессе прохождения спринта. Ответы на теги являются важным весом в формировании спринта. Отношение к тегу имеют три градации: "не интересно" - вопросы по тегу не отображаются, "интересуюсь" - не приоритетный показ карточек, "занимаюсь/поддерживаю/итд" - приоритетный показ карточек и повышенный рейтинг соседства. Текущий набор тегов вы можете увидеть [здесь](README-files/semantic-list.md).

## Пользовательский опыт

_Описание экранов и взаимодействий с пользователями_

##### Стартовое окно

После запуска бота пользователь может запустить спринт спринт, посмотреть список друзей и настройки. В это стартовое меню можно выйти 

##### ожидание спринта

жжж
##### Вывод спринта



Запустив спринт пользователю показывается сообщение о его формировании, в зависимости от загруженности сервиса это может занять какое-то время. После того, как формирование закончится пользователь сможет преступить к обработке спринта. В абзацах ниже по порядку описан каждый тип выводимых в спринте карточек.

Для новых и сброшенный аккаунтов всегда вначале показываются карточки с выбором языков, которыми владеет пользователь и карточки теста на определение типажа (см. раздел "Типажи"), что бы с самого начала рассадить людей "по жанрам". В случае если появятся новые языки или вопросы по определению типажа они добавляются в следующие спринты всех пользователей.

Следующая очередь карточек в спринте - предложение подписаться на интересные теги. Так как тегов много - ставится лимит на 5 тегов за спринт. Для каждого тега пользователь может указать - интересно/не интересно. Если не интересно - карточки по этому тегу не будут показываться. И если интересно - так же пользователь может указать что он компетентен в этой области. Пользователи компетентные в одной области будут иметь больший рейтинг соседства.

Далее выводится предложение задать 1 вопрос сообществу. Пользователь выбирает тег и пишет по нему сообщение. Система автоматически выбирает язык что бы показывать его только пользователям кто им владеет.

Следующая карточка - информационная карточка добавленная админом, например, с просьбой пожертвовать денег. Если админ добавил несколько карточек - выбирается случайная.

После выводятся 5 вопросов, которые система считает самыми релевантными для оценки пользователя. Кнопки: "Лайк", "дизлайк", "..." => "заблокировать", "заблокировать и пожаловаться".

В конце показывается сосед с самым высоким соседским рейтингом и соседи для которых пользователь имеет самый большой соседский рейтинг. Пользователь может посмотреть историю вопросов и ответов потенциального друга и при желании предложить ему дружбу. Кнопки: "предложить дружбу" и "заблокировать"

Что бы закончить спринт нужно обязательно обработать все карточки.

##### Список друзей

- Друзья

##### Профиль

- Язык
- Взгляды
- Интересы
- Настройки профиля можно сбросить, что выведет в следующем спринте заново опросник с интересами.
  -- Обнулить профиль
  -- Удалить профиль

## Алгоритмы

_Ниже кратко описаны алгоритмы заложенные в систему_

##### Формирование спринта

- сначала соседи

Обращаемся к полю пользователя в базе "количество спринтов" и если оно равно нулю - включается скрипт формирования

- Последовательность типов карточек (отдельные условия для новых пользователей)
- выбор карточек для показа (для каждого типа)

##### Ранжирование соседей

- добавление в соседство
- операции с рейтингом соседа

##### Ранжирование вопросов

##### Ранжирование ответов

##### Ранжирование тегов

## Дополнительная информация о проекте

- [UML-карта](README-files/uml.md)
- [Семантическая структура](README-files/semantic-list.md)

## Кураторы проекта

- [t.me/grandcore](https://t.me/grandcore)
- [t.me/Mechislav](https://t.me/Mechislav)
